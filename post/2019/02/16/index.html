<!DOCTYPE html><html lang="ja"><head><link rel="icon" href="/favicon.png"/><meta name="google-site-verification" content="7gVj5rzyozu0vYcQMLhIGr4g-WWyJn4R22RgeYqQdS0"/><script src="https://www.googletagmanager.com/gtag/js?id=UA-46554348-4"></script><script>
window.dataLayer = window.dataLayer || [];
window.gtag = function(){dataLayer.push(arguments);}
window.gtag('js', new Date());
window.gtag('config', 'UA-46554348-4', {page_path: window.location.pathname});
</script><meta name="viewport" content="width=device-width"/><meta charSet="utf-8"/><title>リモートワーク用の環境を構築するときはアカウントを分けるとよさそう | My snippets</title><meta name="next-head-count" content="3"/><link rel="preload" href="/_next/static/css/3118f4a5cdc48aa468ba.css" as="style"/><link rel="stylesheet" href="/_next/static/css/3118f4a5cdc48aa468ba.css" data-n-g=""/><link rel="preload" href="/_next/static/css/be10f5f7efdee9258153.css" as="style"/><link rel="stylesheet" href="/_next/static/css/be10f5f7efdee9258153.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/_next/static/chunks/webpack-377d9957422d331503bc.js" defer=""></script><script src="/_next/static/chunks/framework-92300432a1172ef1338b.js" defer=""></script><script src="/_next/static/chunks/main-ff11dfa7b9d2932d51f3.js" defer=""></script><script src="/_next/static/chunks/pages/_app-aeb6e3be34fe6d240b38.js" defer=""></script><script src="/_next/static/chunks/pages/post/%5B...paths%5D-9248b9a62a3194e493a0.js" defer=""></script><script src="/_next/static/AnNfzTuH3AQR6W_HWvg1c/_buildManifest.js" defer=""></script><script src="/_next/static/AnNfzTuH3AQR6W_HWvg1c/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="default_defaultLayout__1hsFy"><section class="navbar-header_navbarHeader__3g5tB"><h3 class="navbar-header_navbarHeaderTitle__2ef7R"><a href="/">My snippets</a></h3></section><div class="default_defaultLayoutContent__2tmRG"><div class="card_card__DcOjB"><h1 class="article-card_title__3J6E6"><a href="/post/2019/02/16/">リモートワーク用の環境を構築するときはアカウントを分けるとよさそう</a></h1><div class="tag-list_tagList__2paiH"><span class="tag_tag__Z47f9 tag-list_tagLink__ESpk3"><a href="/tag/development/posts/1/">development</a></span><span class="tag_tag__Z47f9 tag-list_tagDate__2WCFH">2 years ago</span></div><div class="article-card_content__3af8_"><div class="prose prose_prose__2WXno"><p>最近リモート用の環境を私物の PC に構築した。</p><p>その時にアカウントを分けて、ブックマークとか作業環境を混ざらないようにしたが
色々やることがあったのでメモっておく</p><h2>brew の設定を分ける</h2><p>デフォルトだと <code>/usr/local</code> に全て入ってアカウント共有になってしまう。</p><p>そうすると更新するたびに<code>sudo</code>権限を求められてしまうため、アカウント毎に <code>brew</code> を設定した。</p><p><code>brew</code> を別ディレクトリに置けば、勝手に<code>BREW_HOME</code>を親ディレクトリに設定してくれる。</p><pre><code class="hljs language-bash">mkdir -p <span class="hljs-string">&quot;<span class="hljs-variable">${HOME}</span>/.brew&quot;</span>
curl -L https://github.com/Homebrew/brew/archive/master.tar.gz \
         | tar xz --strip-components=1 -C <span class="hljs-string">&quot;<span class="hljs-variable">${HOME}</span>/.brew&quot;</span>
<span class="hljs-built_in">export</span> PATH=<span class="hljs-variable">${HOME}</span>/.brew/bin:<span class="hljs-variable">${PATH}</span></code></pre><h2>dotfiles を共有する</h2><p>会社用の Github アカウントを新規で作成したが、さすがに dotfiles は常々更新するので、
同じものを使いたい。</p><p><code>git config core.sshCommand</code>で個別に鍵を指定した。</p><pre><code class="hljs language-bash">mkdir -p ~/.ssh/projects/github.com/
ssh-keygen -t ed25519 -N <span class="hljs-string">&quot;&quot;</span> -C <span class="hljs-string">&quot;&quot;</span> -f ~/.ssh/projects/github.com/<span class="hljs-variable">${USER}</span>_id_ed25519
git config core.sshCommand <span class="hljs-string">&quot;ssh -i ~/.ssh/projects/github.com/<span class="hljs-variable">${USER}</span>_id_ed25519&quot;</span></code></pre><h2>PS1 に icon を設定する</h2><p><code>su</code> で雑にアカウントを往復することがあるんだけども、名前は違えど色味がほぼほぼ同じなので
&#x27;あれ、どっちで作業しているんだっけ…&#x27;的なことが時々起こる</p><p>名前からランダムに絵文字を設定してみた。</p><pre><code class="hljs language-bash">icon=$(<span class="hljs-built_in">echo</span> -ne $((<span class="hljs-number">127744</span> + <span class="hljs-number">16</span>#$(whoami|md5sum|cut -c-<span class="hljs-number">8</span>)%<span class="hljs-number">512</span>))|awk <span class="hljs-string">&#x27;{printf(&quot;%3c&quot;,$1)}&#x27;</span>)</code></pre><p>これを適当に PS1 に入れておけば、間違えにくくなる</p><h2>セキュアなデータを GoogleDrive にいれて Git で管理する</h2><p>だいぶ Bad Practice な気がするが、パスワードとか ssh-key とかは全部 Git のリポジトリにして管理している。</p><p>それを一旦 GoogleDrive とかにぶち込んで別端末に持ってきた。</p><p>さすがに内容が内容なので、<code>git encrypt</code> コマンドを作って暗号化してみた</p><p><a href="https://github.com/kojimat/git-encrypt">https://github.com/kojimat/git-encrypt</a></p></div></div></div></div></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"siteName":"My snippets","source":{"compiledSource":"var c=Object.defineProperty,h=Object.defineProperties;var d=Object.getOwnPropertyDescriptors;var r=Object.getOwnPropertySymbols;var t=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;var o=(a,s,n)=\u003es in a?c(a,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):a[s]=n,e=(a,s)=\u003e{for(var n in s||(s={}))t.call(s,n)\u0026\u0026o(a,n,s[n]);if(r)for(var n of r(s))i.call(s,n)\u0026\u0026o(a,n,s[n]);return a},m=(a,s)=\u003eh(a,d(s));var l=(a,s)=\u003e{var n={};for(var p in a)t.call(a,p)\u0026\u0026s.indexOf(p)\u003c0\u0026\u0026(n[p]=a[p]);if(a!=null\u0026\u0026r)for(var p of r(a))s.indexOf(p)\u003c0\u0026\u0026i.call(a,p)\u0026\u0026(n[p]=a[p]);return n};const layoutProps={},MDXLayout=\"wrapper\";function MDXContent(n){var p=n,{components:a}=p,s=l(p,[\"components\"]);return mdx(MDXLayout,m(e(e({},layoutProps),s),{components:a,mdxType:\"MDXLayout\"}),mdx(\"p\",null,\"\\u6700\\u8FD1\\u30EA\\u30E2\\u30FC\\u30C8\\u7528\\u306E\\u74B0\\u5883\\u3092\\u79C1\\u7269\\u306E PC \\u306B\\u69CB\\u7BC9\\u3057\\u305F\\u3002\"),mdx(\"p\",null,`\\u305D\\u306E\\u6642\\u306B\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u5206\\u3051\\u3066\\u3001\\u30D6\\u30C3\\u30AF\\u30DE\\u30FC\\u30AF\\u3068\\u304B\\u4F5C\\u696D\\u74B0\\u5883\\u3092\\u6DF7\\u3056\\u3089\\u306A\\u3044\\u3088\\u3046\\u306B\\u3057\\u305F\\u304C\n\\u8272\\u3005\\u3084\\u308B\\u3053\\u3068\\u304C\\u3042\\u3063\\u305F\\u306E\\u3067\\u30E1\\u30E2\\u3063\\u3066\\u304A\\u304F`),mdx(\"h2\",null,\"brew \\u306E\\u8A2D\\u5B9A\\u3092\\u5206\\u3051\\u308B\"),mdx(\"p\",null,\"\\u30C7\\u30D5\\u30A9\\u30EB\\u30C8\\u3060\\u3068 \",mdx(\"inlineCode\",{parentName:\"p\"},\"/usr/local\"),\" \\u306B\\u5168\\u3066\\u5165\\u3063\\u3066\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u5171\\u6709\\u306B\\u306A\\u3063\\u3066\\u3057\\u307E\\u3046\\u3002\"),mdx(\"p\",null,\"\\u305D\\u3046\\u3059\\u308B\\u3068\\u66F4\\u65B0\\u3059\\u308B\\u305F\\u3073\\u306B\",mdx(\"inlineCode\",{parentName:\"p\"},\"sudo\"),\"\\u6A29\\u9650\\u3092\\u6C42\\u3081\\u3089\\u308C\\u3066\\u3057\\u307E\\u3046\\u305F\\u3081\\u3001\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u6BCE\\u306B \",mdx(\"inlineCode\",{parentName:\"p\"},\"brew\"),\" \\u3092\\u8A2D\\u5B9A\\u3057\\u305F\\u3002\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"brew\"),\" \\u3092\\u5225\\u30C7\\u30A3\\u30EC\\u30AF\\u30C8\\u30EA\\u306B\\u7F6E\\u3051\\u3070\\u3001\\u52DD\\u624B\\u306B\",mdx(\"inlineCode\",{parentName:\"p\"},\"BREW_HOME\"),\"\\u3092\\u89AA\\u30C7\\u30A3\\u30EC\\u30AF\\u30C8\\u30EA\\u306B\\u8A2D\\u5B9A\\u3057\\u3066\\u304F\\u308C\\u308B\\u3002\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),\"mkdir -p \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"',mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-variable\"}),\"${HOME}\"),'/.brew\"'),`\ncurl -L https://github.com/Homebrew/brew/archive/master.tar.gz \\\\\n         | tar xz --strip-components=1 -C `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"',mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-variable\"}),\"${HOME}\"),'/.brew\"'),`\n`,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"export\"),\" PATH=\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-variable\"}),\"${HOME}\"),\"/.brew/bin:\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-variable\"}),\"${PATH}\"))),mdx(\"h2\",null,\"dotfiles \\u3092\\u5171\\u6709\\u3059\\u308B\"),mdx(\"p\",null,`\\u4F1A\\u793E\\u7528\\u306E Github \\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u65B0\\u898F\\u3067\\u4F5C\\u6210\\u3057\\u305F\\u304C\\u3001\\u3055\\u3059\\u304C\\u306B dotfiles \\u306F\\u5E38\\u3005\\u66F4\\u65B0\\u3059\\u308B\\u306E\\u3067\\u3001\n\\u540C\\u3058\\u3082\\u306E\\u3092\\u4F7F\\u3044\\u305F\\u3044\\u3002`),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"git config core.sshCommand\"),\"\\u3067\\u500B\\u5225\\u306B\\u9375\\u3092\\u6307\\u5B9A\\u3057\\u305F\\u3002\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),`mkdir -p ~/.ssh/projects/github.com/\nssh-keygen -t ed25519 -N `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),\" -C \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"\"'),\" -f ~/.ssh/projects/github.com/\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-variable\"}),\"${USER}\"),`_id_ed25519\ngit config core.sshCommand `,mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),'\"ssh -i ~/.ssh/projects/github.com/',mdx(\"span\",e({parentName:\"span\"},{className:\"hljs-variable\"}),\"${USER}\"),'_id_ed25519\"'))),mdx(\"h2\",null,\"PS1 \\u306B icon \\u3092\\u8A2D\\u5B9A\\u3059\\u308B\"),mdx(\"p\",null,mdx(\"inlineCode\",{parentName:\"p\"},\"su\"),` \\u3067\\u96D1\\u306B\\u30A2\\u30AB\\u30A6\\u30F3\\u30C8\\u3092\\u5F80\\u5FA9\\u3059\\u308B\\u3053\\u3068\\u304C\\u3042\\u308B\\u3093\\u3060\\u3051\\u3069\\u3082\\u3001\\u540D\\u524D\\u306F\\u9055\\u3048\\u3069\\u8272\\u5473\\u304C\\u307B\\u307C\\u307B\\u307C\\u540C\\u3058\\u306A\\u306E\\u3067\n'\\u3042\\u308C\\u3001\\u3069\\u3063\\u3061\\u3067\\u4F5C\\u696D\\u3057\\u3066\\u3044\\u308B\\u3093\\u3060\\u3063\\u3051\\u2026'\\u7684\\u306A\\u3053\\u3068\\u304C\\u6642\\u3005\\u8D77\\u3053\\u308B`),mdx(\"p\",null,\"\\u540D\\u524D\\u304B\\u3089\\u30E9\\u30F3\\u30C0\\u30E0\\u306B\\u7D75\\u6587\\u5B57\\u3092\\u8A2D\\u5B9A\\u3057\\u3066\\u307F\\u305F\\u3002\"),mdx(\"pre\",null,mdx(\"code\",e({parentName:\"pre\"},{className:\"hljs language-bash\"}),\"icon=$(\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-built_in\"}),\"echo\"),\" -ne $((\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"127744\"),\" + \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"16\"),\"#$(whoami|md5sum|cut -c-\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"8\"),\")%\",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-number\"}),\"512\"),\"))|awk \",mdx(\"span\",e({parentName:\"code\"},{className:\"hljs-string\"}),`'{printf(\"%3c\",$1)}'`),\")\")),mdx(\"p\",null,\"\\u3053\\u308C\\u3092\\u9069\\u5F53\\u306B PS1 \\u306B\\u5165\\u308C\\u3066\\u304A\\u3051\\u3070\\u3001\\u9593\\u9055\\u3048\\u306B\\u304F\\u304F\\u306A\\u308B\"),mdx(\"h2\",null,\"\\u30BB\\u30AD\\u30E5\\u30A2\\u306A\\u30C7\\u30FC\\u30BF\\u3092 GoogleDrive \\u306B\\u3044\\u308C\\u3066 Git \\u3067\\u7BA1\\u7406\\u3059\\u308B\"),mdx(\"p\",null,\"\\u3060\\u3044\\u3076 Bad Practice \\u306A\\u6C17\\u304C\\u3059\\u308B\\u304C\\u3001\\u30D1\\u30B9\\u30EF\\u30FC\\u30C9\\u3068\\u304B ssh-key \\u3068\\u304B\\u306F\\u5168\\u90E8 Git \\u306E\\u30EA\\u30DD\\u30B8\\u30C8\\u30EA\\u306B\\u3057\\u3066\\u7BA1\\u7406\\u3057\\u3066\\u3044\\u308B\\u3002\"),mdx(\"p\",null,\"\\u305D\\u308C\\u3092\\u4E00\\u65E6 GoogleDrive \\u3068\\u304B\\u306B\\u3076\\u3061\\u8FBC\\u3093\\u3067\\u5225\\u7AEF\\u672B\\u306B\\u6301\\u3063\\u3066\\u304D\\u305F\\u3002\"),mdx(\"p\",null,\"\\u3055\\u3059\\u304C\\u306B\\u5185\\u5BB9\\u304C\\u5185\\u5BB9\\u306A\\u306E\\u3067\\u3001\",mdx(\"inlineCode\",{parentName:\"p\"},\"git encrypt\"),\" \\u30B3\\u30DE\\u30F3\\u30C9\\u3092\\u4F5C\\u3063\\u3066\\u6697\\u53F7\\u5316\\u3057\\u3066\\u307F\\u305F\"),mdx(\"p\",null,mdx(\"a\",e({parentName:\"p\"},{href:\"https://github.com/kojimat/git-encrypt\"}),\"https://github.com/kojimat/git-encrypt\")))}MDXContent.isMDXComponent=!0;\n","scope":{}},"post":{"title":"リモートワーク用の環境を構築するときはアカウントを分けるとよさそう","description":"\n最近リモート用の環境を私物の PC に構築した。\n\nその時にアカウントを分けて、ブックマークとか作業環境を混ざらないようにしたが\n色々やることがあったのでメモっておく\n\n\u003c!--more--\u003e\n\n#","createdAt":"2019-02-16T05:56:38.000Z","tags":["development"],"draft":false,"slug":"2019/02/16","content":"\n最近リモート用の環境を私物の PC に構築した。\n\nその時にアカウントを分けて、ブックマークとか作業環境を混ざらないようにしたが\n色々やることがあったのでメモっておく\n\n\u003c!--more--\u003e\n\n## brew の設定を分ける\n\nデフォルトだと `/usr/local` に全て入ってアカウント共有になってしまう。\n\nそうすると更新するたびに`sudo`権限を求められてしまうため、アカウント毎に `brew` を設定した。\n\n`brew` を別ディレクトリに置けば、勝手に`BREW_HOME`を親ディレクトリに設定してくれる。\n\n```bash\nmkdir -p \"${HOME}/.brew\"\ncurl -L https://github.com/Homebrew/brew/archive/master.tar.gz \\\n         | tar xz --strip-components=1 -C \"${HOME}/.brew\"\nexport PATH=${HOME}/.brew/bin:${PATH}\n```\n\n## dotfiles を共有する\n\n会社用の Github アカウントを新規で作成したが、さすがに dotfiles は常々更新するので、\n同じものを使いたい。\n\n`git config core.sshCommand`で個別に鍵を指定した。\n\n```bash\nmkdir -p ~/.ssh/projects/github.com/\nssh-keygen -t ed25519 -N \"\" -C \"\" -f ~/.ssh/projects/github.com/${USER}_id_ed25519\ngit config core.sshCommand \"ssh -i ~/.ssh/projects/github.com/${USER}_id_ed25519\"\n```\n\n## PS1 に icon を設定する\n\n`su` で雑にアカウントを往復することがあるんだけども、名前は違えど色味がほぼほぼ同じなので\n'あれ、どっちで作業しているんだっけ…'的なことが時々起こる\n\n名前からランダムに絵文字を設定してみた。\n\n```bash\nicon=$(echo -ne $((127744 + 16#$(whoami|md5sum|cut -c-8)%512))|awk '{printf(\"%3c\",$1)}')\n```\n\nこれを適当に PS1 に入れておけば、間違えにくくなる\n\n## セキュアなデータを GoogleDrive にいれて Git で管理する\n\nだいぶ Bad Practice な気がするが、パスワードとか ssh-key とかは全部 Git のリポジトリにして管理している。\n\nそれを一旦 GoogleDrive とかにぶち込んで別端末に持ってきた。\n\nさすがに内容が内容なので、`git encrypt` コマンドを作って暗号化してみた\n\nhttps://github.com/kojimat/git-encrypt\n"}},"__N_SSG":true},"page":"/post/[...paths]","query":{"paths":["2019","02","16"]},"buildId":"AnNfzTuH3AQR6W_HWvg1c","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>