_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{O47S:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/js/cosine-similarity",function(){return t("SOBv")}])},SOBv:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return r})),t.d(a,"default",(function(){return o}));var c=t("wx14"),s=t("Ff2n"),n=t("q1tI"),b=t.n(n),j=t("7ljp"),p=t("TJE1"),r=(b.a.createElement,{CreatedAt:"2016-05-28T21:12:36+09:00",Draft:!1,Title:"\u95a2\u9023\u8a18\u4e8b\u3092\u63a2\u3059",Tags:["Development","JavaScript"],__resourcePath:"post/js/cosine-similarity/index.md",__scans:{},layout:"index"}),m={frontMatter:r},l=p.a;function o(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(j.b)(l,Object(c.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(j.b)("p",null,"\u4ed6\u306e\u30d6\u30ed\u30b0\u3092\u53c2\u8003\u306b\u3059\u308b\u3068\u95a2\u9023\u8a18\u4e8b\u3068\u3044\u3046\u306e\u3092\u6700\u5f8c\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002"),Object(j.b)("p",null,"\u307e\u3060\u8a18\u4e8b\u306e\u6570\u306f\u5c11\u306a\u3044\u3051\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u8fd1\u3044\u8a18\u4e8b\u3092\u63a2\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002"),Object(j.b)("h3",null,"\u985e\u4f3c\u5ea6\u306e\u53d6\u5f97"),Object(j.b)("p",null,'"MeCab" + "\u985e\u4f3c" \u3067\u30b0\u30b0\u3063\u305f\u3089\u3001\u30b3\u30b5\u30a4\u30f3\u985e\u4f3c\u5ea6\u306a\u308b\u3082\u306e\u304c\u3042\u308b\u3068\u306e\u3053\u3068\u3002'),Object(j.b)("ul",null,Object(j.b)("li",{parentName:"ul"},Object(j.b)("a",Object(c.a)({parentName:"li"},{href:"http://www.cse.kyoto-su.ac.jp/~g0846020/keywords/cosinSimilarity.html"}),"\u30b3\u30b5\u30a4\u30f3\u985e\u4f3c\u5ea6")),Object(j.b)("li",{parentName:"ul"},Object(j.b)("a",Object(c.a)({parentName:"li"},{href:"http://qiita.com/nmbakfm/items/6bb91b89571dd68fcea6"}),"TF-IDF Cos \u985e\u4f3c\u5ea6\u63a8\u5b9a\u6cd5"))),Object(j.b)("p",null,"\u3053\u306e\u30d6\u30ed\u30b0\u306f js + hugo \u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\n",Object(j.b)("a",Object(c.a)({parentName:"p"},{href:"https://www.npmjs.com/package/kuromoji"}),"kuromoji")," \u306e\u30e9\u30c3\u30d1\u30fc\n",Object(j.b)("a",Object(c.a)({parentName:"p"},{href:"https://www.npmjs.com/package/kuromojin"}),"kuromojin")," \u3092\u4f7f\u3063\u3066\u5f62\u614b\u7d20\u89e3\u6790\u3059\u308b\u3002"),Object(j.b)("h3",null,"\u30b3\u30fc\u30c9\u89e3\u8aac"),Object(j.b)("p",null,Object(j.b)("a",Object(c.a)({parentName:"p"},{href:"https://github.com/mijime/mijime.github.io/blob/content/source/js/similarity/index.js"}),"\u30b3\u30fc\u30c9\u5168\u4f53")),Object(j.b)("p",null,"\u30c6\u30ad\u30b9\u30c8\u3092\u5206\u89e3\u3057\u3066\u3001 \u5358\u8a9e\u3068\u51fa\u73fe\u56de\u6570\u3092\u8a18\u9332\u3059\u308b\u3002"),Object(j.b)("pre",null,Object(j.b)("code",Object(c.a)({parentName:"pre"},{className:"hljs language-javascript"}),Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"async")," ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-title"}),"parseVector"),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"text"),") "),"{\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," tokens = ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"await")," tokenize(text)\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," tokens.reduce(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"acc, next"),") =>")," {\n    ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"if")," (!isTargetToken(next)) {\n      ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," acc\n    }\n\n    ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"if")," (acc[next.surface_form]) {\n      acc[next.surface_form]++\n    } ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"else")," {\n      acc[next.surface_form] = ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"1"),"\n    }\n\n    ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," acc\n  }, {})\n}")),Object(j.b)("p",null,"\u51fa\u73fe\u56de\u6570\u3092\u6570\u3048\u308b\u306e\u306f\u540d\u8a5e\u3067 3 \u6587\u5b57\u4ee5\u4e0a\u306e\u5358\u8a9e\u306e\u307f\u3002"),Object(j.b)("pre",null,Object(j.b)("code",Object(c.a)({parentName:"pre"},{className:"hljs language-javascript"}),Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-title"}),"isTargetToken"),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"token"),") "),"{\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," (\n    token.pos === ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-string"}),"'\u540d\u8a5e'")," &&\n    token.surface_form.length >= ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"3")," &&\n    (token.basic_form !== ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-string"}),"'*'")," || token.surface_form.match(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-regexp"}),"/^[\\wA-Z]+$/"),"))\n  )\n}")),Object(j.b)("p",null,"\u3042\u3068\u306f\u8a08\u7b97\u3057\u3066\u304a\u3057\u307e\u3044\u3002"),Object(j.b)("pre",null,Object(j.b)("code",Object(c.a)({parentName:"pre"},{className:"hljs language-javascript"}),Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-title"}),"cosineSimilarity"),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"curr, next"),") "),"{\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," currKeys = ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Object"),".keys(curr)\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," nextKeys = ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Object"),".keys(next)\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," keys = currKeys\n    .concat(nextKeys)\n    .filter(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"v, i, self"),") =>")," self.indexOf(v) === i)\n\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," baseScore = keys\n    .map(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (curr[k] || ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),") * (next[k] || ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," currScore = keys\n    .map(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (curr[k] ? ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Math"),".pow(curr[k], ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"2"),") : ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," nextScore = keys\n    .map(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (next[k] ? ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Math"),".pow(next[k], ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"2"),") : ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),"(",Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," score = baseScore\n    ? baseScore / (",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Math"),".sqrt(currScore) * ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-built_in"}),"Math"),".sqrt(nextScore))\n    : ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-number"}),"0"),"\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"const")," words = keys.filter(",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-function"}),Object(j.b)("span",Object(c.a)({parentName:"span"},{className:"hljs-params"}),"k")," =>")," curr[k] && next[k])\n  ",Object(j.b)("span",Object(c.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," { score, words }\n}")),Object(j.b)("h3",null,"\u5b9f\u884c\u7d50\u679c"),Object(j.b)("p",null,"\u3046\u30fc\u3093\u3001\u5168\u7136\u95a2\u4fc2\u306a\u3044\u5358\u8a9e\u3067\u3057\u304b\u4e00\u81f4\u3057\u306a\u3044\u3001\u3001\u3001\u305d\u306e\u901a\u308a\u3067\u306f\u3042\u308b\u3093\u3060\u3051\u3069"),Object(j.b)("pre",null,Object(j.b)("code",Object(c.a)({parentName:"pre"},{}),'babel-node source/js/similarity "content/posts/js/cosine-similarity.md" "content"\n\n25.26%  content\\posts\\2016-05-23\\github-cli.md  com, https, mijime, github\n0%      content\\posts\\2016-05-26\\border-implement.md\n0%      content\\posts\\2016-05-26\\ci-is-difficult.md\n0%      content\\posts\\blog\\first-blogged.md\n0%      content\\posts\\hugo\\code-mermaid.md\n20.9%   content\\posts\\hugo\\hugo-deploy.md       branch, content\n100%    content\\posts\\js\\cosine-similarity.md   100, 2016, 89571, MeCab, \u30b3\u30b5\u30a4\u30f3\n9.93%   content\\posts\\blog\\blog-of-policy.md    branch, posts, slides\n1.98%   content\\posts\\hugo\\hugo-pagination.md   html, pagination\n3.52%   content\\slides\\2016-05-27\\my-first-slide.md     html\n')))}o.isMDXComponent=!0}},[["O47S",0,2,1,3]]]);