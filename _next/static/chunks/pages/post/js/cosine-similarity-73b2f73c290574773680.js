_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[32],{"7ljp":function(e,a,t){"use strict";t.d(a,"a",(function(){return m})),t.d(a,"b",(function(){return u}));var n=t("q1tI"),s=t.n(n);function c(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}function r(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function o(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?r(Object(t),!0).forEach((function(a){c(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):r(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}function l(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}var p=s.a.createContext({}),b=function(e){var a=s.a.useContext(p),t=a;return e&&(t="function"===typeof e?e(a):o(o({},a),e)),t},m=function(e){var a=b(e.components);return s.a.createElement(p.Provider,{value:a},e.children)},i={inlineCode:"code",wrapper:function(e){var a=e.children;return s.a.createElement(s.a.Fragment,{},a)}},j=s.a.forwardRef((function(e,a){var t=e.components,n=e.mdxType,c=e.originalType,r=e.parentName,p=l(e,["components","mdxType","originalType","parentName"]),m=b(t),j=n,u=m["".concat(r,".").concat(j)]||m[j]||i[j]||c;return t?s.a.createElement(u,o(o({ref:a},p),{},{components:t})):s.a.createElement(u,o({ref:a},p))}));function u(e,a){var t=arguments,n=a&&a.mdxType;if("string"===typeof e||n){var c=t.length,r=new Array(c);r[0]=j;var o={};for(var l in a)hasOwnProperty.call(a,l)&&(o[l]=a[l]);o.originalType=e,o.mdxType="string"===typeof e?e:n,r[1]=o;for(var p=2;p<c;p++)r[p]=t[p];return s.a.createElement.apply(null,r)}return s.a.createElement.apply(null,t)}j.displayName="MDXCreateElement"},Ff2n:function(e,a,t){"use strict";function n(e,a){if(null==e)return{};var t,n,s=function(e,a){if(null==e)return{};var t,n,s={},c=Object.keys(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||(s[t]=e[t]);return s}(e,a);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(e);for(n=0;n<c.length;n++)t=c[n],a.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(s[t]=e[t])}return s}t.d(a,"a",(function(){return n}))},O47S:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/js/cosine-similarity",function(){return t("SOBv")}])},SOBv:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return p})),t.d(a,"default",(function(){return i}));var n=t("rePB"),s=t("Ff2n"),c=(t("q1tI"),t("7ljp")),r=t("W10S");function o(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);a&&(n=n.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,n)}return t}function l(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?o(Object(t),!0).forEach((function(a){Object(n.a)(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):o(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var p={Date:"2016-05-28T21:12:36+09:00",Draft:!1,Title:"\u95a2\u9023\u8a18\u4e8b\u3092\u63a2\u3059",Tags:["Development","JavaScript"],__resourcePath:"post/js/cosine-similarity/index.md",__scans:{},layout:"index"},b={frontMatter:p},m=r.a;function i(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(c.b)(m,l(l(l({},b),t),{},{components:a,mdxType:"MDXLayout"}),Object(c.b)("p",null,"\u4ed6\u306e\u30d6\u30ed\u30b0\u3092\u53c2\u8003\u306b\u3059\u308b\u3068\u95a2\u9023\u8a18\u4e8b\u3068\u3044\u3046\u306e\u3092\u6700\u5f8c\u306b\u8868\u793a\u3057\u3066\u3044\u308b\u3089\u3057\u3044\u3002"),Object(c.b)("p",null,"\u307e\u3060\u8a18\u4e8b\u306e\u6570\u306f\u5c11\u306a\u3044\u3051\u3069\u3001\u3042\u308b\u7a0b\u5ea6\u8fd1\u3044\u8a18\u4e8b\u3092\u63a2\u3059\u3053\u3068\u304c\u3067\u304d\u308b\u3088\u3046\u306b\u3059\u308b\u3002"),Object(c.b)("h3",null,"\u985e\u4f3c\u5ea6\u306e\u53d6\u5f97"),Object(c.b)("p",null,'"MeCab" + "\u985e\u4f3c" \u3067\u30b0\u30b0\u3063\u305f\u3089\u3001\u30b3\u30b5\u30a4\u30f3\u985e\u4f3c\u5ea6\u306a\u308b\u3082\u306e\u304c\u3042\u308b\u3068\u306e\u3053\u3068\u3002'),Object(c.b)("ul",null,Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",l({parentName:"li"},{href:"http://www.cse.kyoto-su.ac.jp/~g0846020/keywords/cosinSimilarity.html"}),"\u30b3\u30b5\u30a4\u30f3\u985e\u4f3c\u5ea6")),Object(c.b)("li",{parentName:"ul"},Object(c.b)("a",l({parentName:"li"},{href:"http://qiita.com/nmbakfm/items/6bb91b89571dd68fcea6"}),"TF-IDF Cos \u985e\u4f3c\u5ea6\u63a8\u5b9a\u6cd5"))),Object(c.b)("p",null,"\u3053\u306e\u30d6\u30ed\u30b0\u306f js + hugo \u3067\u66f8\u3044\u3066\u3044\u308b\u306e\u3067\u3001\n",Object(c.b)("a",l({parentName:"p"},{href:"https://www.npmjs.com/package/kuromoji"}),"kuromoji")," \u306e\u30e9\u30c3\u30d1\u30fc\n",Object(c.b)("a",l({parentName:"p"},{href:"https://www.npmjs.com/package/kuromojin"}),"kuromojin")," \u3092\u4f7f\u3063\u3066\u5f62\u614b\u7d20\u89e3\u6790\u3059\u308b\u3002"),Object(c.b)("h3",null,"\u30b3\u30fc\u30c9\u89e3\u8aac"),Object(c.b)("p",null,Object(c.b)("a",l({parentName:"p"},{href:"https://github.com/mijime/mijime.github.io/blob/content/source/js/similarity/index.js"}),"\u30b3\u30fc\u30c9\u5168\u4f53")),Object(c.b)("p",null,"\u30c6\u30ad\u30b9\u30c8\u3092\u5206\u89e3\u3057\u3066\u3001 \u5358\u8a9e\u3068\u51fa\u73fe\u56de\u6570\u3092\u8a18\u9332\u3059\u308b\u3002"),Object(c.b)("pre",null,Object(c.b)("code",l({parentName:"pre"},{className:"hljs language-javascript"}),Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"async")," ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(c.b)("span",l({parentName:"span"},{className:"hljs-title"}),"parseVector"),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"text"),") "),"{\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," tokens = ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"await")," tokenize(text)\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"return")," tokens.reduce(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"acc, next"),") =>")," {\n    ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"if")," (!isTargetToken(next)) {\n      ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"return")," acc\n    }\n\n    ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"if")," (acc[next.surface_form]) {\n      acc[next.surface_form]++\n    } ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"else")," {\n      acc[next.surface_form] = ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"1"),"\n    }\n\n    ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"return")," acc\n  }, {})\n}")),Object(c.b)("p",null,"\u51fa\u73fe\u56de\u6570\u3092\u6570\u3048\u308b\u306e\u306f\u540d\u8a5e\u3067 3 \u6587\u5b57\u4ee5\u4e0a\u306e\u5358\u8a9e\u306e\u307f\u3002"),Object(c.b)("pre",null,Object(c.b)("code",l({parentName:"pre"},{className:"hljs language-javascript"}),Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(c.b)("span",l({parentName:"span"},{className:"hljs-title"}),"isTargetToken"),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"token"),") "),"{\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"return")," (\n    token.pos === ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-string"}),"'\u540d\u8a5e'")," &&\n    token.surface_form.length >= ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"3")," &&\n    (token.basic_form !== ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-string"}),"'*'")," || token.surface_form.match(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-regexp"}),"/^[\\wA-Z]+$/"),"))\n  )\n}")),Object(c.b)("p",null,"\u3042\u3068\u306f\u8a08\u7b97\u3057\u3066\u304a\u3057\u307e\u3044\u3002"),Object(c.b)("pre",null,Object(c.b)("code",l({parentName:"pre"},{className:"hljs language-javascript"}),Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-keyword"}),"function")," ",Object(c.b)("span",l({parentName:"span"},{className:"hljs-title"}),"cosineSimilarity"),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"curr, next"),") "),"{\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," currKeys = ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Object"),".keys(curr)\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," nextKeys = ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Object"),".keys(next)\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," keys = currKeys\n    .concat(nextKeys)\n    .filter(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"v, i, self"),") =>")," self.indexOf(v) === i)\n\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," baseScore = keys\n    .map(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (curr[k] || ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),") * (next[k] || ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," currScore = keys\n    .map(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (curr[k] ? ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Math"),".pow(curr[k], ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"2"),") : ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," nextScore = keys\n    .map(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"k")," =>")," (next[k] ? ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Math"),".pow(next[k], ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"2"),") : ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),"))\n    .reduce(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),"(",Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"acc, c"),") =>")," acc + c, ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),")\n\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," score = baseScore\n    ? baseScore / (",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Math"),".sqrt(currScore) * ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-built_in"}),"Math"),".sqrt(nextScore))\n    : ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-number"}),"0"),"\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"const")," words = keys.filter(",Object(c.b)("span",l({parentName:"code"},{className:"hljs-function"}),Object(c.b)("span",l({parentName:"span"},{className:"hljs-params"}),"k")," =>")," curr[k] && next[k])\n  ",Object(c.b)("span",l({parentName:"code"},{className:"hljs-keyword"}),"return")," { score, words }\n}")),Object(c.b)("h3",null,"\u5b9f\u884c\u7d50\u679c"),Object(c.b)("p",null,"\u3046\u30fc\u3093\u3001\u5168\u7136\u95a2\u4fc2\u306a\u3044\u5358\u8a9e\u3067\u3057\u304b\u4e00\u81f4\u3057\u306a\u3044\u3001\u3001\u3001\u305d\u306e\u901a\u308a\u3067\u306f\u3042\u308b\u3093\u3060\u3051\u3069"),Object(c.b)("pre",null,Object(c.b)("code",l({parentName:"pre"},{}),'babel-node source/js/similarity "content/posts/js/cosine-similarity.md" "content"\n\n25.26%  content\\posts\\2016-05-23\\github-cli.md  com, https, mijime, github\n0%      content\\posts\\2016-05-26\\border-implement.md\n0%      content\\posts\\2016-05-26\\ci-is-difficult.md\n0%      content\\posts\\blog\\first-blogged.md\n0%      content\\posts\\hugo\\code-mermaid.md\n20.9%   content\\posts\\hugo\\hugo-deploy.md       branch, content\n100%    content\\posts\\js\\cosine-similarity.md   100, 2016, 89571, MeCab, \u30b3\u30b5\u30a4\u30f3\n9.93%   content\\posts\\blog\\blog-of-policy.md    branch, posts, slides\n1.98%   content\\posts\\hugo\\hugo-pagination.md   html, pagination\n3.52%   content\\slides\\2016-05-27\\my-first-slide.md     html\n')))}i.isMDXComponent=!0},W10S:function(e,a,t){"use strict";t.d(a,"a",(function(){return l}));var n=t("nKUr"),s=t("g4pe"),c=t.n(s);var r=t("MMqm"),o=t("wEQj");function l(e){var a,t=e.frontMatter,s=e.children,l={title:(a=t).title||a.Title||"",description:a.description||a.Description||"",date:a.date||a.Date||(new Date).toISOString(),tags:a.tags||a.Tags||[],draft:!!a.draft||!!a.Draft};return Object(n.jsxs)(n.Fragment,{children:[Object(n.jsx)(c.a,{children:Object(n.jsxs)("title",{children:[l.title," | ",r.c]})}),Object(n.jsx)(o.a,{slug:"",content:"",description:l.description,draft:l.draft,title:l.title,date:l.date,tags:l.tags.map((function(e){return e.toLowerCase()})),children:s})]})}},rePB:function(e,a,t){"use strict";function n(e,a,t){return a in e?Object.defineProperty(e,a,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[a]=t,e}t.d(a,"a",(function(){return n}))},wEQj:function(e,a,t){"use strict";t.d(a,"a",(function(){return r}));var n=t("nKUr"),s=t("YFqc"),c=t.n(s);function r(e){var a=e.title,t=e.date,s=e.tags,r=void 0===s?[]:s,o=e.children;return Object(n.jsx)("div",{className:"article card",children:Object(n.jsxs)("div",{className:"card-content",children:[Object(n.jsx)("div",{className:"article-title",children:Object(n.jsxs)("div",{className:"has-text-centered",children:[Object(n.jsx)("p",{className:"title",children:a}),Object(n.jsxs)("div",{className:"tags level-item has-addons",children:[r.map((function(e){return Object(n.jsx)("span",{className:"tag is-rounded is-info",children:Object(n.jsx)(c.a,{href:"/tag/".concat(e,"/1"),children:e})},e)})),Object(n.jsx)("span",{className:"tag is-rounded",children:t})]})]})}),Object(n.jsx)("div",{className:"content article-body pt-8",children:o})]})})}}},[["O47S",0,2,1,3]]]);