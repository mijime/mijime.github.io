_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[38],{NoX0:function(e,a,t){"use strict";t.r(a),t.d(a,"frontMatter",(function(){return o})),t.d(a,"default",(function(){return m}));var n=t("wx14"),s=t("Ff2n"),c=t("q1tI"),r=t.n(c),b=t("7ljp"),l=t("TJE1"),o=(r.a.createElement,{Date:"2017-10-22T21:25:19+09:00",Draft:!1,Title:"Git\u304c\u30a4\u30f3\u30b9\u30c8\u30fc\u30eb\u3055\u308c\u3066\u3044\u306a\u3044\u74b0\u5883\u3067\u30ed\u30b0\u3092\u53d6\u5f97\u3057\u3001\u30cf\u30f3\u30c9\u30ea\u30f3\u30b0\u3059\u308b",Tags:["Git"],__resourcePath:"post/python/git-fetch/index.md",__scans:{},layout:"index"}),p={frontMatter:o},j=l.a;function m(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(b.b)(j,Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(b.b)("p",null,"Python \u306e dulwich \u3092\u4f7f\u3046\u4f8b\u304c\u591a\u3044"),Object(b.b)("pre",null,Object(b.b)("code",Object(n.a)({parentName:"pre"},{className:"hljs language-python"}),Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"from")," dulwich.client ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"import")," HttpGitClient\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"from")," dulwich.repo ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"import")," MemoryRepo\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"from")," urllib.parse ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"import")," urlparse\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"import")," itertools\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-keyword"}),"def")," ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-title"}),"fetch_repo"),"(",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-params"}),"repo=",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-literal"}),"None"),", url=",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-literal"}),"None")),"):"),"\n    url_object = urlparse(url)\n    client = HttpGitClient(",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-string"}),'"://"'),".join([url_object.scheme, url_object.netloc]))\n    remote_refs = client.fetch(url_object.path, repo)\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"for")," ref, sha1 ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"in")," remote_refs.items():\n        repo.refs[ref] = sha1\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," repo\n\n",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-function"}),Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-keyword"}),"def")," ",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-title"}),"get_first_commit_time"),"(",Object(b.b)("span",Object(n.a)({parentName:"span"},{className:"hljs-params"}),"repo"),"):"),"\n    ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"for")," entry ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"in")," repo.get_walker():\n        ",Object(b.b)("span",Object(n.a)({parentName:"code"},{className:"hljs-keyword"}),"return")," entry.commit.commit_time")),Object(b.b)("h2",null,"Reference"),Object(b.b)("ul",null,Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/jelmer/dulwich"}),"https://github.com/jelmer/dulwich")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"http://ijin.github.io/blog/2016/02/18/ssh-and-git-on-aws-lambda/"}),"http://ijin.github.io/blog/2016/02/18/ssh-and-git-on-aws-lambda/")),Object(b.b)("li",{parentName:"ul"},Object(b.b)("a",Object(n.a)({parentName:"li"},{href:"https://qiita.com/shibataka000/items/910754486ba2585209b2"}),"https://qiita.com/shibataka000/items/910754486ba2585209b2"))))}m.isMDXComponent=!0},iqEl:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/post/python/git-fetch",function(){return t("NoX0")}])}},[["iqEl",0,2,1,3]]]);