{"pageProps":{"posts":[{"title":"Gitがインストールされていない環境でログを取得し、ハンドリングする","description":"","date":"2017-10-22T21:25:19+09:00","tags":["git"],"draft":false,"slug":"python/git-fetch","content":"\nPython の dulwich を使う例が多い\n\n<!--more-->\n\n```python\nfrom dulwich.client import HttpGitClient\nfrom dulwich.repo import MemoryRepo\nfrom urllib.parse import urlparse\nimport itertools\n\ndef fetch_repo(repo=None, url=None):\n    url_object = urlparse(url)\n    client = HttpGitClient(\"://\".join([url_object.scheme, url_object.netloc]))\n    remote_refs = client.fetch(url_object.path, repo)\n    for ref, sha1 in remote_refs.items():\n        repo.refs[ref] = sha1\n    return repo\n\ndef get_first_commit_time(repo):\n    for entry in repo.get_walker():\n        return entry.commit.commit_time\n```\n\n## Reference\n\n- https://github.com/jelmer/dulwich\n- http://ijin.github.io/blog/2016/02/18/ssh-and-git-on-aws-lambda/\n- https://qiita.com/shibataka000/items/910754486ba2585209b2\n"}],"postCount":1,"page":1,"tagName":"git"},"__N_SSG":true}